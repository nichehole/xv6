#include "types.h"
#include "stat.h"
#include "user.h"

#define STACKSIZE (1<<10)

void t1(int x) {
  for(;;) {
    printf(1, "abc: %d\n", x);
    sleep(10);
  }
}

int
main(int argc, char *argv[])
{
  int pid;
  uint x = 37;
  uint *stack = (uint*) malloc(STACKSIZE * sizeof(int));
  stack += STACKSIZE;
  pid = threadop(t1, (void*)x, stack, STACKSIZE);
  printf(1, "pid: %d\n", pid);
  while (1);
  exit();
}
